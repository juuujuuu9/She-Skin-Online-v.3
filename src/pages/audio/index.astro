---
import Layout from '@layouts/Layout.astro';
import { PlayButton, AddToQueueButton } from '@components/AudioControls';
import type { Track } from '@lib/audioStore';

const BALLM_TRACK: Track = {
  id: 'ballm-mt1',
  title: 'beside a luv like mine (mt1 stream)',
  artist: 'she_skin',
  src: '/media/audio/sheskin - beside a luv like mine (mt1 stream).mp3',
  album: 'ICT★SNU SOUND Vol. 1',
  year: 2024,
};

const LIBC_TRACK: Track = {
  id: 'libc-driving',
  title: 'Driving On The Sun',
  artist: 'LIBC',
  src: '/media/audio/LIBC - Driving On The Sun.mp3',
};

// Release data - replace with CMS data (placeholders have no audio)
const releases = [
  { id: '1', title: 'ICT★SNU SOUND Vol. 1', year: 2024, coverArt: '/media/audio/BALLM-COVER.jpg', tracks: [BALLM_TRACK] },
  { id: '2', title: 'Driving On The Sun', year: 2024, coverArt: '/media/audio/Screenshot-2025-12-17-at-12.47.33-AM.webp', tracks: [LIBC_TRACK] },
  { id: '3', title: 'Release 3', year: 2024, coverArt: null, tracks: [] },
  { id: '4', title: 'Release 4', year: 2024, coverArt: null, tracks: [] },
  { id: '5', title: 'Release 5', year: 2024, coverArt: null, tracks: [] },
  { id: '6', title: 'Release 6', year: 2024, coverArt: null, tracks: [] },
  { id: '7', title: 'Release 7', year: 2024, coverArt: null, tracks: [] },
  { id: '8', title: 'Release 8', year: 2024, coverArt: null, tracks: [] },
  { id: '9', title: 'Release 9', year: 2024, coverArt: null, tracks: [] },
];
---

<Layout title="ICT★SNU SOUND - she_skin">
  <main class="min-h-screen bg-white">
    <header class="px-6 pt-8 md:pt-8">
      <div class="w-full">
        <h1 class="sm:text-2xl text-[13px] font-bold tracking-tight text-black mb-4">
          ICT★SNU SOUND
        </h1>
        <p class="text-sm text-gray-500 max-w-xl">
          Audio releases and sound works. Click play to begin listening — the player will persist as you navigate.
        </p>
      </div>
    </header>

    <section class="px-6 pt-8 py-12">
      <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
        {releases.map((release) => (
          <div class="relative aspect-square overflow-hidden bg-gray-100 group">
            {release.coverArt ? (
              <img src={release.coverArt} alt={release.title} class="w-full h-full object-cover" />
            ) : (
              <div class="w-full h-full flex items-center justify-center">
                <span class="text-xs text-gray-400">Album Art</span>
              </div>
            )}
            {release.tracks.length > 0 && (
              <div class="absolute inset-0 flex items-center justify-center gap-2 bg-black/0 group-hover:bg-black/20 transition-colors">
                <PlayButton
                  client:load
                  track={{ ...release.tracks[0], coverArt: release.coverArt ?? undefined }}
                  queue={release.tracks.map(t => ({ ...t, coverArt: release.coverArt ?? undefined }))}
                  variant="overlay"
                  size="lg"
                  className="opacity-0 group-hover:opacity-100 transition-opacity !bg-transparent !border !border-white !text-white hover:!bg-white hover:!text-black"
                />
                <AddToQueueButton
                  client:load
                  track={{ ...release.tracks[0], coverArt: release.coverArt ?? undefined }}
                  className="opacity-0 group-hover:opacity-100 transition-opacity !h-12 !w-12 !border-white !text-white hover:!bg-white hover:!text-black"
                />
              </div>
            )}
          </div>
        ))}
      </div>
    </section>
  </main>
</Layout>
